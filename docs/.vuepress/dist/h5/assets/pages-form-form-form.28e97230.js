var e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;import{_ as r}from"./t-nav-bar.b0596156.js";import{n as t,o as s,c as o,w as i,e as u,I as d,y as n,C as c,H as m,q as f,B as p,v as h,N as b}from"./vendor.0ee72332.js";import{E as g,$ as v,a as _,b as V,r as w,_ as y}from"./uni-app.es.03cc7760.js";import{$ as k}from"./index.27307615.js";import{F as j}from"./flex.7963394f.js";import{_ as x}from"./example.39179343.js";import{_ as F}from"./t-switch.a2700e06.js";import{_ as I}from"./t-stepper.d8a9a728.js";import{_ as $,a as T}from"./t-checkbox-group.12207ea2.js";import{_ as U,a as q}from"./t-radio-group.53fd1b97.js";import{_ as C}from"./t-slider.6c00792b.js";import{_ as P}from"./t-textarea.dcc6364d.js";import{_ as E}from"./t-btn.cf8fe697.js";import"./mixin.3a346e54.js";import"./methods.f3dad712.js";import"./size.22bfc1cd.js";import"./VModel.53dc45c5.js";import"./rounded.20e7000d.js";import"./effects.5bcde988.js";var M=V({name:"t-field",mixins:[g(["click"]),j({align:"start"})],props:v({label:"",labelIcon:"",required:!1,name:"",validateTrigger:""}),inject:["FormValidateTrigger","FormTrackField","FormValidate"],provide(){const e=this.validateTrigger||this.FormValidateTrigger;return{FieldTrack:({type:a=this.type,value:l,trigger:r})=>{this.type=a,this.value=l;r===e&&this.FormValidate(this.name)}}},data:()=>({type:"",value:"",errorMsg:""}),computed:_({ErrorMsg:"field-error-msg-show",Type:["textarea","field-error-msg-textarea",null]}),created(){if(!this.name)throw new Error("t-field的props必须包含name");this.FormTrackField(this.name,(e=>(k.types.not("Undefined",e)&&(this.errorMsg=e),{name:this.name,type:this.type,value:this.value,label:this.label})))}},[["render",function(e,a,l,r,b,g){const v=w(t("t-icon"),y),_=p,V=h;return s(),o(V,{class:f(["t-field",[e.Align]]),onClick:e.click},{default:i((()=>[u(V,{class:"field-label"},{default:i((()=>[e.labelIcon?(s(),o(v,{key:0,type:e.labelIcon,class:"mr-1"},null,8,["type"])):d("",!0),u(_,null,{default:i((()=>[n(c(e.label),1)])),_:1}),e.required?(s(),o(_,{key:1,class:"text-error"},{default:i((()=>[n(" *")])),_:1})):d("",!0)])),_:1}),u(V,{class:"field-input"},{default:i((()=>[m(e.$slots,"default",{},void 0,!0),u(V,{class:f(["field-error-msg",[e.ErrorMsg,e.Type]])},{default:i((()=>[n(c(b.errorMsg),1)])),_:1},8,["class"])])),_:3})])),_:3},8,["class","onClick"])}],["__scopeId","data-v-c683fd86"]]);const{is:S,not:A}=k.types;var O=V({name:"t-form",mixins:[g(["click"])],emits:["fail"],props:v({validateTrigger:"onBlur"}),provide(){return{FormTrackField:(e,a)=>this.fields[e]=a,FormValidate:this.validate,FormValidateTrigger:this.validateTrigger}},data:()=>({fields:{},rules:[]}),methods:{setRules(e){this.rules=e},async validateAll(r=this.rules){const t={},s=[];for(let e in this.fields){const a=r[e];s.push(this.validate(e,a))}return(await Promise.all(s)).forEach((r=>{const s=r,{name:o}=s,i=((r,t)=>{var s={};for(var o in r)a.call(r,o)&&t.indexOf(o)<0&&(s[o]=r[o]);if(null!=r&&e)for(var o of e(r))t.indexOf(o)<0&&l.call(r,o)&&(s[o]=r[o]);return s})(s,["name"]);t[o]=i})),t},async validate(e,a=this.rules[e]){let l=this.fields[e];const r=l();if(S("Undefined",a))return this.success(l,e,r.value);if(A("Array",a))throw new Error(`规则集必须是Array类型，${e}规则集存在类型错误`);for(let s of a){if(A("Function",s)&&A("AsyncFunction",s))throw new Error(`规则集内规则必须是Function类型或者AsyncFunction类型，规则集${e}内规则存在类型错误`);try{const e=await Promise.resolve(s(r));if(S("String",e))throw new Error(e)}catch(t){return this.fail(l,e,t.message)}}return this.success(l,e,r.value)},fail(e,a,l){const{type:r}=e(l),t={name:a,type:r,value:null,status:"fail",errorMsg:l};return this.$emit("fail",t),t},success(e,a,l){const{type:r}=e("");return{name:a,type:r,value:l,status:"success",errorMsg:""}}}},[["render",function(e,a,l,r,t,u){const d=h;return s(),o(d,{onClick:e.click},{default:i((()=>[m(e.$slots,"default")])),_:3},8,["onClick"])}]]);var R=V({data:()=>({blurInput:"",blurPassword:"",changeInput:"",changePassword:"",area:"",slider:18,stepper:18,username:"",checkboxs:[],radioStatus:"1",switchStatus:!1}),methods:{sumbit(){this.$refs.form.validateAll()}},mounted(){const e={username:[e=>{if(!e.value)return`${e.label}必填`}],password:[e=>{if(!e.value)return`${e.label}必填`},e=>{if(e.value.length<8)return"密码长度必须大于8"}]};this.$refs.blurForm.setRules(e),this.$refs.changeForm.setRules(e);this.$refs.form.setRules({username:[e=>{if(!e.value)return`${e.label}必填`}],switch:[e=>e.value||`${e.label}必须打开`],slider:[e=>{if(e.value<20)return`${e.label}必须大于20`}],area:[e=>{if(e.value.length<10)return`${e.label}必须不小于10个字符`}]})}},[["render",function(e,a,l,d,c,m){const f=w(t("t-nav-bar"),r),p=b("t-input"),g=w(t("t-field"),M),v=w(t("t-form"),O),_=w(t("example"),x),V=w(t("t-switch"),F),y=w(t("t-stepper"),I),k=w(t("t-checkbox"),$),j=w(t("t-checkbox-group"),T),S=w(t("t-radio"),U),A=w(t("t-radio-group"),q),R=w(t("t-slider"),C),z=w(t("t-textarea"),P),B=w(t("t-btn"),E),G=h;return s(),o(G,{class:"pb-20"},{default:i((()=>[u(f,{title:"Form",sticky:""}),u(_,{title:"失焦校验",customClass:"mt-8"},{default:i((()=>[u(v,{ref:"blurForm"},{default:i((()=>[u(g,{name:"username",required:"",label:"账号",labelIcon:"deleteuser"},{default:i((()=>[u(p,{modelValue:c.blurInput,"onUpdate:modelValue":a[0]||(a[0]=e=>c.blurInput=e),primordial:"",placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),u(g,{name:"password",required:"",label:"密码",labelIcon:"lock"},{default:i((()=>[u(p,{modelValue:c.blurPassword,"onUpdate:modelValue":a[1]||(a[1]=e=>c.blurPassword=e),primordial:"",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1},512)])),_:1}),u(_,{title:"变更时校验"},{default:i((()=>[u(v,{ref:"changeForm",validateTrigger:"onChange"},{default:i((()=>[u(g,{name:"username",required:"",label:"账号",labelIcon:"deleteuser"},{default:i((()=>[u(p,{modelValue:c.changeInput,"onUpdate:modelValue":a[2]||(a[2]=e=>c.changeInput=e),primordial:"",placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),u(g,{name:"password",required:"",label:"密码",labelIcon:"lock"},{default:i((()=>[u(p,{modelValue:c.changePassword,"onUpdate:modelValue":a[3]||(a[3]=e=>c.changePassword=e),primordial:"",type:"password",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1},512)])),_:1}),u(_,{title:"手动校验"},{default:i((()=>[u(v,{ref:"form",validateTrigger:"manual"},{default:i((()=>[u(g,{required:"",name:"username",label:"用户名",labelIcon:"deleteuser"},{default:i((()=>[u(p,{color:"accent",modelValue:c.username,"onUpdate:modelValue":a[4]||(a[4]=e=>c.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),u(g,{name:"switch",label:"开关",labelIcon:"pic-left"},{default:i((()=>[u(V,{modelValue:c.switchStatus,"onUpdate:modelValue":a[5]||(a[5]=e=>c.switchStatus=e),color:"accent"},null,8,["modelValue"])])),_:1}),u(g,{name:"stepper",validateTrigger:"onChange",label:"步进器",labelIcon:"plus-square"},{default:i((()=>[u(y,{modelValue:c.stepper,"onUpdate:modelValue":a[6]||(a[6]=e=>c.stepper=e),color:"accent"},null,8,["modelValue"])])),_:1}),u(g,{name:"checkGroup",label:"复选框",labelIcon:"check-square"},{default:i((()=>[u(j,{modelValue:c.checkboxs,"onUpdate:modelValue":a[7]||(a[7]=e=>c.checkboxs=e)},{default:i((()=>[u(k,{color:"accent",value:"1",class:"mr-5"},{default:i((()=>[n("项目1")])),_:1}),u(k,{color:"accent",value:"2"},{default:i((()=>[n("项目2")])),_:1})])),_:1},8,["modelValue"])])),_:1}),u(g,{name:"radio",label:"单选框",labelIcon:"select"},{default:i((()=>[u(A,{modelValue:c.radioStatus,"onUpdate:modelValue":a[8]||(a[8]=e=>c.radioStatus=e)},{default:i((()=>[u(S,{color:"accent",value:"1",class:"mr-5"},{default:i((()=>[n("项目1")])),_:1}),u(S,{color:"accent",value:"2",class:"mr-5"},{default:i((()=>[n("项目2")])),_:1})])),_:1},8,["modelValue"])])),_:1}),u(g,{name:"slider",label:"滑块",labelIcon:"sliders"},{default:i((()=>[u(R,{showValue:"",modelValue:c.slider,"onUpdate:modelValue":a[9]||(a[9]=e=>c.slider=e),color:"accent"},null,8,["modelValue"])])),_:1}),u(g,{name:"area",label:"文本",labelIcon:"file-text"},{default:i((()=>[u(z,{color:"accent",size:"w-48 h-20",modelValue:c.area,"onUpdate:modelValue":a[10]||(a[10]=e=>c.area=e)},null,8,["modelValue"])])),_:1})])),_:1},512),u(G,{class:"text-center mt-8"},{default:i((()=>[u(B,{color:"accent",size:"w-45",onClick:m.sumbit},{default:i((()=>[n("sumbit")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})}]]);export{R as default};
