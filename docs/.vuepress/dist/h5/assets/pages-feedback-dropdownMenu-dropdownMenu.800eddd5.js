var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,s,o)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[s]=o;import{_ as n}from"./t-nav-bar.b0596156.js";import{n as c,o as d,c as r,w as u,e as m,q as p,z as v,A as h,y as k,C as w,F as b,K as C,H as f,I as V,t as y,v as g,B as _}from"./vendor.0ee72332.js";import{E as M,S as O,_ as I,$ as j,a as $,t as x,b as A,r as R}from"./uni-app.es.03cc7760.js";import{V as D}from"./VModel.53dc45c5.js";import{R as S}from"./rounded.20e7000d.js";import{_ as z}from"./example.39179343.js";var H=A({name:"t-dropdown-menu",mixins:[M(["click"]),D({value:{}}),O({shadow:"sm"}),S({rounded:"base"})],emits:["change","maskClick","menuItemClick","optionsRowClick"],components:{tIcon:I},props:j({zIndex:100,options:{},disabled:!1,menuItemHeights:{},activeColor:"error",closeOnSelected:!0,closeOnClickMask:!0}),data:()=>({active:null,visible:!1}),computed:$({ActiveColor:x,Disabled:"dropdown-menu-row-disabled",Style(){const{zIndex:e}=this;return{zIndex:e}},MaskVisible(){const{visible:e}=this;return e?"dropdown-menu-mask-show":null},OptionsRowActive(){const{visible:e,ActiveColor:t}=this;return e?`dropdown-menu-row-item-active ${t}`:null},dropdownMenuDynamicHeight(){const{options:e,active:t,visible:s,menuItemHeights:o}=this,{length:l}=e[t]||[],a=`calc(${l} * ${o[t]||"100%"})`;return`height: ${s?a:0}`}}),watch:{VModelValue(e){this.change(e)}},methods:{menuItemClick(e,n){var c;this.updateVModelValue((c=((e,t)=>{for(var s in t||(t={}))l.call(t,s)&&i(e,s,t[s]);if(o)for(var s of o(t))a.call(t,s)&&i(e,s,t[s]);return e})({},this.VModelValue),t(c,s({[e]:n})))),this.$emit("menuItemClick",{type:e,value:n}),this.closeOnSelected&&this.hidden()},maskClick(e){this.$emit("maskClick",e),this.closeOnClickMask&&this.hidden()},optionsRowClick(e,t){this.updateActive(e),this.$emit("optionsRowClick",{type:e})},change(e){this.$emit("change",e)},updateActive(e){if(this.active===e&&this.visible)return this.hidden();this.show(),this.active=e},show(){this.visible=!0},hidden(){this.visible=!1}}},[["render",function(e,t,s,o,l,a){const i=g,n=_,M=R(c("t-icon"),I);return d(),r(i,{class:"t-dropdown-menu",onClick:e.click,style:y([e.Style])},{default:u((()=>[m(i,{class:p(["dropdown-menu-mask",[e.MaskVisible]]),onClick:a.maskClick},null,8,["class","onClick"]),m(i,{class:p(["dropdown-menu-row",[e.Disabled,e.Shadow]])},{default:u((()=>[(d(!0),v(b,null,h(e.VModelValue,((t,s)=>(d(),r(i,{key:s,class:p(["dropdown-menu-row-item",[l.active===s&&e.OptionsRowActive]]),onClick:e=>a.optionsRowClick(s,t)},{default:u((()=>[k(w(e.options[s][t]),1)])),_:2},1032,["onClick","class"])))),128))])),_:1},8,["class"]),m(i,{class:p(["dropdown-menu",[e.Rounded]]),style:y(e.dropdownMenuDynamicHeight)},{default:u((()=>[(d(!0),v(b,null,h(e.options[l.active],((t,s)=>(d(),r(i,{class:"dropdown-menu-item",onClick:C((e=>a.menuItemClick(l.active,s)),["stop"]),key:s},{default:u((()=>[f(e.$slots,"default",{text:t,index:s,type:l.active,isActive:s===e.VModelValue[l.active]},(()=>[m(i,{class:p(["dropdown-menu-item-container",s===e.VModelValue[l.active]&&e.ActiveColor])},{default:u((()=>[m(n,null,{default:u((()=>[k(w(t),1)])),_:2},1024),s===e.VModelValue[l.active]?(d(),r(M,{key:0,type:"check",size:"1.1em"})):V("",!0)])),_:2},1032,["class"])]),!0)])),_:2},1032,["onClick"])))),128))])),_:3},8,["class","style"])])),_:3},8,["onClick","style"])}],["__scopeId","data-v-09d65052"]]);var P=A({data:()=>({values1:{goods:0,sort:0},values2:{goods:0,sort:0},values3:{goods:0,sort:0},options:{goods:["全部商品","新款商品","活动商品"],sort:["默认排序","好评排序","销量排序"]}})},[["render",function(e,t,s,o,l,a){const i=R(c("t-nav-bar"),n),p=R(c("t-dropdown-menu"),H),v=R(c("example"),z),h=g;return d(),r(h,{class:"pb-60"},{default:u((()=>[m(i,{title:"DropDownMenu"}),m(v,{customClass:"mt-8",title:"基础"},{default:u((()=>[m(p,{modelValue:l.values1,"onUpdate:modelValue":t[0]||(t[0]=e=>l.values1=e),options:l.options},null,8,["modelValue","options"])])),_:1}),m(v,{customClass:"mt-30",title:"选中颜色"},{default:u((()=>[m(p,{modelValue:l.values2,"onUpdate:modelValue":t[1]||(t[1]=e=>l.values2=e),activeColor:"success",options:l.options},null,8,["modelValue","options"])])),_:1}),m(v,{customClass:"mt-30",title:"禁用"},{default:u((()=>[m(p,{disabled:"",modelValue:l.values3,"onUpdate:modelValue":t[2]||(t[2]=e=>l.values3=e),options:l.options},null,8,["modelValue","options"])])),_:1})])),_:1})}]]);export{P as default};
